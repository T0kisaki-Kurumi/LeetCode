WRMCB=function(e){var c=console;if(c&&c.log&&c.error){c.log('Error running batched script.');c.error(e);}}
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-browser-metrics:util', location = 'js/util/is-boolean.js' */
define("confluence-browser-metrics/util/is-boolean",[],function(){return function(a){return typeof a==="boolean"}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-browser-metrics:util', location = 'js/util/is-number.js' */
define("confluence-browser-metrics/util/is-number",[],function(){return function(a){return typeof a==="number"}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-browser-metrics:util', location = 'js/util/is-string.js' */
define("confluence-browser-metrics/util/is-string",[],function(){return function(a){return typeof a==="string"}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-browser-metrics:server-duration', location = '/js/reporters/server-duration-reporter.js' */
define("confluence-browser-metrics/reporters/server-duration-reporter",["internal/browser-metrics","jquery"],function(c,d){var b=d.Deferred();d(function(){var f;try{f=JSON.parse(d("#confluence-server-performance").html())}catch(g){console&&console.error(g);f=null}if(f!==null&&f.serverDuration){b.resolve(f)}else{b.resolve({})}});var a=function(e){if(e.isInitial){return b.promise()}else{return{}}};return a});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-browser-metrics:server-duration', location = '/js/marshallers/server-duration-marshaller.js' */
define("confluence-browser-metrics/marshallers/server-duration-marshaller",["confluence-browser-metrics/util/is-number"],function(b){function c(d){return b(d.serverDuration)}var a=function(d){if(c(d)){return{serverDuration:""+Math.floor(d.serverDuration)}}};return a});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-browser-metrics:server-duration', location = '/js/marshallers/request-correlation-id-marshaller.js' */
define("confluence-browser-metrics/marshallers/request-correlation-id-marshaller",["confluence-browser-metrics/util/is-string"],function(a){function b(d){return a(d.requestCorrelationId)}var c=function(d){if(b(d)){return{requestCorrelationId:d.requestCorrelationId}}};return c});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-browser-metrics:bigpipe-reporter', location = '/js/reporters/bigpipe-reporter.js' */
define("confluence-browser-metrics/reporters/bigpipe-reporter",["jquery"],function(c){var a=c.Deferred();c(function(){if(typeof AJS.BigPipe!=="undefined"&&AJS.BigPipe.metrics){a.resolve(AJS.BigPipe.metrics)}else{a.resolve({})}});var b=function(d){if(d.isInitial){return a.promise()}else{return{}}};return b});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-browser-metrics:bigpipe-reporter', location = '/js/marshallers/bigpipe-marshaller.js' */
define("confluence-browser-metrics/marshallers/bigpipe-marshaller",["confluence-browser-metrics/util/is-boolean"],function(c){function a(d){return c(d.isBigPipeEnabled)}var b=function(d){if(a(d)){return{isBigPipeEnabled:""+d.isBigPipeEnabled}}};return b});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-browser-metrics:bigpipe-reporter', location = '/js/marshallers/page-end-marshaller.js' */
define("confluence-browser-metrics/marshallers/page-end-marshaller",["confluence-browser-metrics/util/is-number"],function(c){function b(d){return c(d.pageEnd)}var a=function(d){if(b(d)){return{pageEnd:""+Math.floor(d.pageEnd)}}};return a});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-browser-metrics:spa-transitions', location = '/js/reporters/spa-transitions-reporter.js' */
define("confluence-browser-metrics/reporters/spa-transitions-reporter",["jquery","ajs","confluence/storage-manager"],function(c,i,l){var d=c.Deferred();var m="page-page";var k="dashboard-page";var a=l("confluence","spa-transition");i.toInit(function(){c(document).on("click","a",g);var o=null;if(a.doesContain(m)){o=m}else{if(a.doesContain(k)){o=k}}if(o){d.resolve({"confluence-spa-transition":o});a.removeItem(o)}else{d.resolve({})}});function g(p){var o=c(this).attr("href");if(o&&e(p)&&b(o)){a.setItemQuietly(h()?k:m,true,300)}return true}function e(o){return o.which===1&&!o.metaKey&&!o.ctrlKey&&!o.shiftKey}function b(o){return(o.indexOf("/display/")!==-1||j(o)||o.indexOf("/viewpage.action")!==-1)&&(o.indexOf("~")===-1||n(o))}function n(o){return(o.indexOf("/",o.indexOf("~")+1)!==-1)&&o.slice(-1)!=="/"}function j(o){return/spaces\/(.*)\/pages\/(.*)/.test(o)}function h(){return c("body").hasClass("dashboard")}var f=function(o){if(o.isInitial){return d.promise()}else{return{}}};return f});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-browser-metrics:spa-transitions', location = '/js/marshallers/spa-transitions-marshaller.js' */
define("confluence-browser-metrics/marshallers/spa-transitions-marshaller",["confluence-browser-metrics/util/is-string"],function(a){function c(d){return a(d["confluence-spa-transition"])}var b=function(d){if(c(d)){return{"confluence-spa-transition":d["confluence-spa-transition"]}}};return b});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-browser-metrics:defer-js', location = '/js/reporters/defer-js-reporter.js' */
define("confluence-browser-metrics/reporters/defer-js-reporter",["confluence/dark-features","jquery"],function(a,c){return function b(d){if(d.isInitial&&a.isEnabled("defer.js.enable")&&c("#doctheme-anchor").length===0){return{deferJs:true}}else{return{}}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-browser-metrics:defer-js', location = '/js/marshallers/defer-js-marshaller.js' */
define("confluence-browser-metrics/marshallers/defer-js-marshaller",["confluence-browser-metrics/util/is-boolean"],function(c){function b(d){return c(d.deferJs)}var a=function(d){if(b(d)){return{deferJs:""+d.deferJs}}};return a});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-browser-metrics:spa-navigation', location = 'js/marshallers/spa-navigation-marshaller.js' */
define("confluence-browser-metrics/marshallers/spa-navigation-marshaller",["confluence-browser-metrics/util/is-string"],function(a){return function(b){if(a(b.transitionTo)){return{transitionTo:b.transitionTo}}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-browser-metrics:browser-metrics-reporters', location = '/js/register-reporters.js' */
window["browser-metrics-plugin"].install(function(a){require(["internal/browser-metrics","internal/browser-metrics-aa-beacon","confluence-browser-metrics/reporters/spa-transitions-reporter","confluence-browser-metrics/marshallers/spa-transitions-marshaller","confluence-browser-metrics/reporters/defer-js-reporter","confluence-browser-metrics/marshallers/defer-js-marshaller","confluence-browser-metrics/reporters/server-duration-reporter","confluence-browser-metrics/marshallers/server-duration-marshaller","confluence-browser-metrics/marshallers/request-correlation-id-marshaller","confluence-browser-metrics/reporters/bigpipe-reporter","confluence-browser-metrics/marshallers/bigpipe-marshaller","confluence-browser-metrics/marshallers/page-end-marshaller","confluence-browser-metrics/marshallers/spa-navigation-marshaller"],function(k,c,i,n,j,f,d,g,b,h,m,l,e){k.addReporter(i);k.addReporter(j);k.addReporter(d);k.addReporter(h);c.addReportMarshaller(n);c.addReportMarshaller(f);c.addReportMarshaller(g);c.addReportMarshaller(b);c.addReportMarshaller(m);c.addReportMarshaller(l);c.addReportMarshaller(e);a()})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.browser.metrics.browser-metrics-plugin:impl', location = 'browser-metrics-aa-beacon/impl.js' */
!function(e,r){"use strict";const t=e=>"number"==typeof e;const n=e=>"string"==typeof e,a=e=>""+Math.floor(e);const o=(e,r)=>{Object.keys(e).forEach((t=>{r(t,e[t])}))};function s(e){return Object.keys(e).length}class i{constructor(){this.children={},this.values=[]}add(e,r){0==e.length?this.values.push(r):(this.children.hasOwnProperty(e[0])||(this.children[e[0]]=new i),this.children[e[0]].add(e.substr(1),r))}toTrieObject(){let e={};return o(this.children,((r,t)=>{e[r]=t.toTrieObject()})),0===this.values.length?e:0===s(this.children)?this.values:[e,this.values]}condensed(){let e=new i;return e.values=this.values.concat(),o(this.children,((r,t)=>{let n=t.condensed();0===n.values.length&&1===s(n.children)?o(n.children,((t,n)=>{e.children[r+t]=n})):e.children[r]=n})),e}}const d={other:0,img:1,link:2,script:3,css:4,xmlhttprequest:5};function u(e){return(e=Math.floor(e||0))>0?e.toString(36):""}let l="unloadEventStart,unloadEventEnd,redirectStart,redirectEnd,fetchStart,domainLookupStart,domainLookupEnd,connectStart,connectEnd,secureConnectionStart,requestStart,responseStart,responseEnd,domLoading,domInteractive,domContentLoadedEventStart,domContentLoadedEventEnd,domComplete,loadEventStart,loadEventEnd".split(",");r.addReportMarshaller((e=>{var r={};return Object.keys(e).forEach((a=>{var o=e[a];(t(o)||(e=>"boolean"==typeof e)(o)||n(o)||null===o)&&(r[a]=o)})),r})),r.addReportMarshaller((e=>({elementTimings:JSON.stringify(e.elementTimings)}))),r.addReportMarshaller((e=>{if(function(e){return t(e.apdex)}(e))return{apdex:""+e.apdex}})),r.addReportMarshaller((e=>{if(function(e){return t(e.firstPaint)}(e))return{firstPaint:a(e.firstPaint)}})),r.addReportMarshaller((e=>{if(function(e){return"boolean"==typeof e.isInitial}(e))return{isInitial:""+e.isInitial}})),r.addReportMarshaller((e=>{if(function(e){return n(e.journeyId)}(e))return{journeyId:e.journeyId}})),r.addReportMarshaller((e=>{if(function(e){return n(e.key)}(e))return{key:e.key}})),r.addReportMarshaller((e=>{if(function(e){return t(e.navigationType)}(e))return{navigationType:""+e.navigationType}})),r.addReportMarshaller((e=>{if(function(e){return t(e.readyForUser)}(e))return{readyForUser:a(e.readyForUser)}})),r.addReportMarshaller((e=>{if(function(e){return t(e.redirectCount)}(e))return{redirectCount:""+e.redirectCount}})),r.addReportMarshaller((e=>{if(function(e){return t(e.resourceLoadedEnd)}(e))return{resourceLoadedEnd:a(e.resourceLoadedEnd)}})),r.addReportMarshaller((e=>{if(function(e){return Array.isArray(e.resourceTiming)}(e)){let t=new i;return e.resourceTiming.forEach((e=>{let n=r.cleanUrl(e.name);t.add(n||"☠",function(e){return[d[e.initiatorType]||-1,u(e.startTime),u(e.responseEnd),u(e.responseStart),u(e.requestStart),u(e.connectEnd),u(e.secureConnectionStart),u(e.connectStart),u(e.domainLookupEnd),u(e.domainLookupStart),u(e.redirectEnd),u(e.redirectStart)].join(",").replace(/,+$/,"")}(e))})),{resourceTiming:JSON.stringify(t.condensed().toTrieObject())}}})),r.addReportMarshaller((e=>{if(function(e){return t(e.threshold)}(e))return{threshold:a(e.threshold)}})),r.addReportMarshaller((e=>{let r={};return l.forEach((n=>{t(e[n])&&(r[n]=a(e[n]))})),r})),r.addReportMarshaller((e=>{if(function(e){return n(e.userAgent)}(e))return{userAgent:e.userAgent}})),r.addReportMarshaller((e=>{if(function(e){return"object"==typeof e.marks}(e)){let r={},t={marks:{},measures:{}};return e.marks.forEach((e=>{t.marks[e.name]=t.marks[e.name]||[],t.marks[e.name].push(Math.floor(e.time))})),o(t.marks,((e,t)=>{r["mark."+e]=JSON.stringify(t)})),e.measures.forEach((e=>{t.measures[e.name]=t.measures[e.name]||[],t.measures[e.name].push([Math.floor(e.startTime),Math.floor(e.duration)])})),o(t.measures,((e,t)=>{r["measure."+e]=JSON.stringify(t)})),r.userTimingRaw=JSON.stringify({marks:t.marks,measures:t.measures}),r}}));e.subscribe((e=>{r.beacon(e.report)}))}(window["browser-metrics"],window["browser-metrics-aa-beacon"]);

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.browser.metrics.browser-metrics-plugin:impl', location = 'impl.js' */
!function(t,e){"use strict";let n=window;var r;try{r=n.require("jquery")}catch(t){r=n.jQuery}var i=r;const o=/^(?:https?:)?\/\/[^\.]+\.cloudfront\.net\/p\/([^\/]+)\/main\.js$/,a=/^(?:https?:)?\/\/aes-artifacts--cdn\.[^\.]+\.atlassian\.io\/hashed\/([^\/]+)\/.+\.js$/;const s=function(){let t=i.Deferred();return i((function(){let e=[];Array.prototype.slice.call(n.document.getElementsByTagName("script")||[]).forEach((t=>{let n=t.getAttribute("src"),r=n&&(n.match(a)||n.match(o));if(r&&r.length>1){let n=r[1];e.push({name:n,async:t.async})}})),t.resolve(e)})),t.promise()}().then((t=>({experiments:t})));let c=function(){return s};const u=t=>{if(function(t){return Array.isArray(t.experiments)}(t))return{experiments:JSON.stringify(t.experiments.map((t=>[t.name,t.async?1:0])))}},d=["android","applewebkit","baiduspider","bingbot","build","chrome","compatible","edge","electron","explorer","firefox","gecko","googlebot","iemobile","intel","ipad","iphone","khtml","konqueror","like","linux","mac","macintosh","maxthon","microsoft","mini","mobi","mobile","mozilla","msie","mwendo","nt","opera","opr","os","phone","playstation","presto","rv","safari","samsung","thunderbird","trident","ubuntu","ucbrowser","unix","version","vivo","win","win64","windows","wow64","x","x11","x64","x86","x86_64","xbox"];function f(t){const e=t.toLowerCase().replace(/[;,()+]/g,"");return function(t){return!!t.match(/^[0-9.,_%\-]+$/)}(e)||-1!==d.indexOf(e)?t:""}function l(t){const e=/[\s\/:]/g,n=t.match(e);return null===n?f(t):t.split(e).map(f).reduce(((t,e)=>t+n.shift()+e))}const m=t=>{if(t.userAgent)return{userAgent:l(t.userAgent)}};let p=/^(true|false|\d+)$/gi,v=/([&?][^&=]+)(=?)([^&#]*)/g,y=t=>t.replace(v,((t,e,n,r)=>e+n+((t=>!!t.match(p))(r)?r:"☠"))),g=/(\/s\/).+(\/_\/)/;const h=/^https:\/\/[^.]+\.cloudfront.net\/[^/]+(\/wiki)?\/s\//g,b=t=>t.match(h)?t=(t=>t.replace(g,((t,e,n)=>e+"☠"+n)))(t=y(t)):"",x=/^https:\/\/d2kryfvs3op226\.cloudfront\.net\/[a-f0-9]+\.[a-z]+$/g,E=t=>t.match(x)?t:"",T=/^https:\/\/[^\/]+\.atl-paas.net\//g,w=t=>t.match(T)?t:""
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */;function S(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function P(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))}var I=function(t,e){return{name:t,value:void 0===e?-1:e,delta:0,entries:[],id:"v2-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12)}},k=function(t){addEventListener("pageshow",(function(e){e.persisted&&t(e)}),!0)},L="function"==typeof WeakSet?new WeakSet:new Set,O=function(t,e,n){var r;return function(){e.value>=0&&(n||L.has(e)||"hidden"===document.visibilityState)&&(e.delta=e.value-(r||0),(e.delta||void 0===r)&&(r=e.value,t(e)))}},M=-1,B=function(){return"hidden"===document.visibilityState?0:1/0},C=function(){var t,e,n;t=function(t){var e=t.timeStamp;M=e},e=!0,n=function n(r){"pagehide"!==r.type&&"hidden"!==document.visibilityState||(t(r),e&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))},addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},j=function(){return M<0&&(M=B(),C(),k((function(){setTimeout((function(){M=B(),C()}),0)}))),{get firstHiddenTime(){return M}}};const A=(t,e,n,r=(()=>!1))=>{let i=null;return o=>(i=i||new Promise((t=>{e((e=>{t(e)}))})),r(o)?Promise.reject():i.then((e=>({[t]:n(e)}))))};function q(t){var e;return null===(e=null===PerformanceObserver||void 0===PerformanceObserver?void 0:PerformanceObserver.supportedEntryTypes)||void 0===e?void 0:e.includes(t)}const F=A("fcp",(function(t,e){var n,r=j(),i=I("FCP"),o=function(t){"first-contentful-paint"===t.name&&(s&&s.disconnect(),t.startTime<r.firstHiddenTime&&(i.value=t.startTime,i.entries.push(t),L.add(i),n()))},a=performance.getEntriesByName&&performance.getEntriesByName("first-contentful-paint")[0],s=a?null:function(t,e){try{if(PerformanceObserver.supportedEntryTypes.includes(t)){if("first-input"===t&&!("PerformanceEventTiming"in self))return;var n=new PerformanceObserver((function(t){return t.getEntries().map(e)}));return n.observe({type:t,buffered:!0}),n}}catch(t){}}("paint",o);(a||s)&&(n=O(t,i,e),a&&o(a),k((function(r){i=I("FCP"),n=O(t,i,e),requestAnimationFrame((function(){requestAnimationFrame((function(){i.value=performance.now()-r.timeStamp,L.add(i),n()}))}))})))}),(t=>t.value),(t=>{const e=["hidden","mixed"].includes(t.observations.pageVisibility),n=!t.isInitial;return!q("paint")||e||n})),$=A("ttfb",(function(t){var e,n=I("TTFB");e=function(){try{var e=performance.getEntriesByType("navigation")[0]||function(){var t=performance.timing,e={entryType:"navigation",startTime:0};for(var n in t)"navigationStart"!==n&&"toJSON"!==n&&(e[n]=Math.max(t[n]-t.navigationStart,0));return e}();if(n.value=n.delta=e.responseStart,n.value<0)return;n.entries=[e],t(n)}catch(t){}},"complete"===document.readyState?setTimeout(e,0):addEventListener("pageshow",e)}),(t=>t.value),(t=>!t.isInitial));function R(t){return{readyForUser:t.end-t.start}}function V(t,e){return new Promise((function(n){var r;function i(){var e=t();void 0!==e&&(clearInterval(r),n(e))}r=setInterval(i,e),i()}))}const U=()=>window;var N=window;const D=()=>U().performance;function _(){const t=U().chrome;return t&&t.loadTimes}function z(){return void 0!==D().timing.msFirstPaint}function H(){const t=U().chrome,e=D().timing;return _()&&t.loadTimes().firstPaintTime>0?1e3*t.loadTimes().firstPaintTime-e.navigationStart:z()&&e.msFirstPaint>0?e.msFirstPaint-e.navigationStart:void 0}var J="browser-metrics-journey";function W(){const t=U();return t.performance&&t.performance.navigation&&t.performance.timing&&void 0!==t.performance.timing.navigationStart}function Q(t){return"function"==typeof t}function G(){}function K(){const t=D();return t&&Q(t.getEntriesByType)}var X=[];function Y(){return D().getEntriesByType("resource").filter((function(t){return"img"!==t.initiatorType}))}function Z(){const t=D();Q(t.clearResourceTimings)&&(X=Y(),t.clearResourceTimings())}function tt(){return K()?X.concat(Y()):[]}Z(),function(t){const e=D();var n=e.onresourcetimingbufferfull||G;Q(e.addEventListener)?e.addEventListener("resourcetimingbufferfull",t):e.onresourcetimingbufferfull=function(){t(),n()}}(Z);var et,nt="unloadEventStart,unloadEventEnd,redirectStart,redirectEnd,fetchStart,domainLookupStart,domainLookupEnd,connectStart,connectEnd,secureConnectionStart,requestStart,responseStart,responseEnd,domLoading,domInteractive,domContentLoadedEventStart,domContentLoadedEventEnd,domComplete,loadEventStart,loadEventEnd".split(",");function rt(){const t=D().timing;var e=t.loadEventEnd>0,n={};if(e)return nt.forEach((function(e){var r=t[e];r>0&&(n[e]=r-t.navigationStart)})),n}function it(){return W()?(void 0===et&&(et=V(rt,250)),et):Promise.reject("The navigation timing API is required to produce a report for this transition.")}function ot(){var t=N.document.querySelectorAll("script[src][async]");return Array.prototype.map.call(t,(function(t){return function(t){var e=N.document.createElement("a");return e.href=t,e.href}(t.src)}))}function at(){var t=ot();return it().then((function(e){return tt().filter((function(t){return"link"===t.initiatorType||"script"===t.initiatorType})).filter((function(t){return t.responseEnd<e.domContentLoadedEventStart})).filter((function(e){return"script"!==e.initiatorType||-1===t.indexOf(e.name)}))}))}var st="duration,initiatorType,name".split(","),ct="startTime,connectEnd,connectStart,domainLookupEnd,domainLookupStart,fetchStart,redirectEnd,redirectStart,requestStart,responseEnd,responseStart,secureConnectionStart".split(",");function ut(t,e,n){void 0!==n&&(t[e]=n)}const dt=[F,$,function({observations:t}){return void 0===t.pageVisibility?{}:{pageVisibility:t.pageVisibility}},function({entityId:t}){return t?{entityId:t}:{}},function(t){return{key:t.key}},function(t){return{isInitial:t.isInitial}},function(t){return{threshold:t.threshold}},function(){const t=[],e=function(t,e){try{if(q(t)){const n=new PerformanceObserver((t=>t.getEntries().map(e)));return n.observe({type:t,buffered:!0}),n}}catch(t){console.debug("[BM]","observePerformance",t)}}("element",(({startTime:e,identifier:n})=>{t.push({startTime:e,identifier:n})}));return new Promise((n=>{setTimeout((()=>{n({elementTimings:t}),null==e||e.disconnect()}),250)}))},function(){const{deviceMemory:t,hardwareConcurrency:e}=window.navigator,n={};return ut(n,"userDeviceMemory",t),ut(n,"userDeviceProcessors",e),n},function(t){var e=R(t),n=t.threshold,r=4*t.threshold;return{apdex:e.readyForUser<=n?1:e.readyForUser<=r?.5:0}},function(t){if(D())return t.isInitial?(U().top===U().self&&(_()||z())?V(H,250):Promise.reject("The browser does not have a first paint metric")).then((function(t){return{firstPaint:t}}),(function(){return{}})):{}},function(){const t=U();return void 0===t.sessionStorage?Promise.reject("sessionStorage is required to produce a report for this transition."):(null===t.sessionStorage.getItem(J)&&t.sessionStorage.setItem(J,"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*U().Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))),Promise.resolve({journeyId:t.sessionStorage.getItem(J)}))},function(t){var e={};const n=U();return t.isInitial&&W()&&(e.navigationType=n.performance.navigation.type),e},R,function(t){var e={};const n=U();if(t.isInitial){if(!W())return Promise.reject("The navigation timing API is required to produce a report for this transition.");void 0!==n.performance.navigation.redirectCount&&(e.redirectCount=n.performance.navigation.redirectCount)}return Promise.resolve(e)},function(t){return t.isInitial?at().then((function(t){return 0===t.length?{resourceLoadedEnd:null}:{resourceLoadedEnd:t.map((function(t){return t.responseEnd})).reduce((function(t,e){return Math.max(t,e)}))}})):{}},function(t){return t.isInitial?at().then((function(t){if(0===t.length)return{resourceLoadedStart:null};var e=t.map((function(t){return t.startTime}));return{resourceLoadedStart:Math.min.apply(Math,e)}})):{}},function(t){return K()?{resourceTiming:tt().filter((function(e){var n=e.responseEnd;return n>=t.start&&n<=t.end&&e.startTime>=t.start})).map((function(e){var n={};return st.forEach((function(t){n[t]=e[t]})),ct.forEach((function(r){n[r]=e[r]>0?e[r]-t.start:0})),n}))}:{}},function(t){return t.isInitial?it():{}},function(){return{userAgent:U().navigator.userAgent}},function(t){const e=D();if(!e||!Q(e.getEntriesByType))return{};var n=e.getEntriesByType("mark").filter((function(e){return e.startTime>=t.start&&e.startTime<=t.end})),r=e.getEntriesByType("measure").filter((function(e){return e.startTime>=t.start&&e.startTime+e.duration<=t.end}));return{marks:n.map((function(e){return{name:e.name,time:e.startTime-t.start}})),measures:r.map((function(e){return{name:e.name,startTime:e.startTime-t.start,duration:e.duration}}))}}];var ft=Object.prototype.hasOwnProperty;function lt(){for(var t,e,n={},r=0,i=arguments.length;r<i;r++)for(e in t=arguments[r])ft.call(t,e)&&(n[e]=t[e]);return n}function mt(t){return(e=t,Promise.all([e]).then((function(t){return t[0]}))).then(null,(function(){return{}}));var e}function pt(t){var e=t.reporters,n=dt.concat().concat(e).map((function(e){var n;try{n=e(t)}catch(t){!function(t){const e=U();(e.console.error||e.console.log).call(e.console,t.stack||t)}(t),n={}}return mt(n)}));return Promise.all(n).then((function(t){return lt.apply(void 0,t)}))}const vt=()=>window.document,yt=()=>{let t=vt().visibilityState;const e=(n=()=>{t="mixed"},document.addEventListener("visibilitychange",n),window.addEventListener("pagehide",n),()=>{document.removeEventListener("visibilitychange",n),window.removeEventListener("pagehide",n)});var n;return()=>(e(),t)};const gt=()=>{const t={};return{startTransition:(e,n)=>{if(void 0!==t[e])return console.log("[BM]",`Transition key: "${e}" is already in use.`),!1;console.debug("[BM]",e,"Collector.startTransition",n);const{isInitial:r=!1,threshold:i,reporters:o,timestamp:a,entityId:s}=n,c={pageVisibility:yt()};return t[e]={isInitial:r,start:a,key:e,threshold:i,reporters:o,entityId:s,observers:c},!0},endTransition:(e,n)=>P(void 0,void 0,void 0,(function*(){var r;const i=t[e];if(void 0===i)throw new Error(`Transition with key: ${e} does not exist in the registry`);console.debug("[BM]",e,"Collector.endTransition",n),delete t[e];const{observers:o}=i,a=S(i,["observers"]);return function(t,e){t.entityId&&e.entityId&&console.debug("[BM]",`entityId "${t.entityId}" provided in start() was overridden by "${e.entityId}" provided in end()`)}(i,n),Object.assign(Object.assign({},a),{observations:{pageVisibility:o.pageVisibility()},end:n.timestamp,entityId:null!==(r=n.entityId)&&void 0!==r?r:a.entityId})}))}};function ht(){const t=[],e=[],n=gt();function r(t){return e.push(t),console.debug("[BM]",t.key,"Report stored"),t}function i(e){return t.forEach((function(t){t({report:e})})),console.debug("[BM]",e.key,"Subscribers notified"),e}function o(t){!function(t){dt.push(t)}(t)}function a(n){!function(t){e.forEach((function(e){t({report:e})}))}(n),t.push(n)}return function(t){t.start?function(t){var{key:e}=t,r=S(t,["key"]);n.startTransition(e,r)}(t.start):t.end?function(t){var{key:e}=t,o=S(t,["key"]);n.endTransition(e,o).then(pt).then(r).then(i).catch((t=>{console.log("[BM]",t.message)}))}(t.end):t.addReporter?o(t.addReporter):t.subscribe&&a(t.subscribe)}}var bt=N["browser-metrics"];function xt(){if(D()){console.log("[BM]","Collector installed");const t=ht();bt.delegateTo(t)}}n.define&&n.define("internal/browser-metrics-plugin/collector",(()=>({install:xt}))),n["browser-metrics-plugin"].install((function(n){t.addReporter(c),e.addReportMarshaller(u),e.addReportMarshaller(m),e.addUrlCleaner(b),e.addUrlCleaner(E),e.addUrlCleaner(w),n()}))}(window["browser-metrics"],window["browser-metrics-aa-beacon"]);

}catch(e){WRMCB(e)};